@import "tailwindcss";
@config "../tailwind.config.ts";

:root {
  /* NILM Dark-First Design System: Gruvbox-Inspired Industrial Energy Palette */
  /* Dark mode is default - these are dark theme values */

  /* Background & Surfaces - Warm dark neutrals */
  --background: 20 10% 12%;
  /* #1d2021 */
  --foreground: 43 38% 87%;
  /* #ebdbb2 */

  --card: 20 8% 22%;
  /* #3c3836 */
  --card-foreground: 43 38% 87%;

  --popover: 20 7% 16%;
  /* #282828 */
  --popover-foreground: 43 38% 87%;

  /* Primary: Energy Amber/Orange #fe8019 */
  --primary: 27 99% 55%;
  --primary-foreground: 20 10% 12%;

  /* Secondary: Warm neutral */
  --secondary: 20 6% 20%;
  /* #32302f */
  --secondary-foreground: 43 38% 87%;

  /* Muted & Accent */
  --muted: 20 6% 20%;
  --muted-foreground: 40 15% 68%;
  /* warmer, higher contrast #b5a68a */

  /* Accent: AI/Prediction Purple #b16286 */
  --accent: 330 35% 54%;
  --accent-foreground: 0 0% 100%;

  /* Destructive */
  --destructive: 1 76% 59%;
  /* #fb4934 */
  --destructive-foreground: 0 0% 100%;

  /* Borders & Inputs */
  --border: 20 7% 29%;
  /* #504945 */
  --input: 20 7% 29%;
  --ring: 27 99% 55%;

  --radius: 0.5rem;

  /* Energy-specific semantic colors */
  --energy-success: 83 47% 62%;
  /* #8ec07c Gruvbox green */
  --energy-success-foreground: 20 10% 12%;
  --energy-warning: 42 96% 58%;
  /* #fabd2f Gruvbox yellow */
  --energy-warning-foreground: 20 10% 12%;
  --energy-warning-bg: 42 40% 18%;
  --energy-error: 1 76% 59%;
  /* #fb4934 Gruvbox red */
  --energy-error-foreground: 0 0% 100%;
  --energy-error-bg: 1 40% 18%;
  --energy-info: 340 45% 68%;
  /* #d3869b */
  --energy-info-foreground: 20 10% 12%;

  /* Colorblind-safe chart palette for dark mode */
  --chart-1: 40 100% 45%;
  /* #E69F00 Orange */
  --chart-2: 199 100% 62%;
  /* #56B4E9 Sky */
  --chart-3: 160 100% 31%;
  /* #009E73 Green */
  --chart-4: 201 100% 35%;
  /* #0072B2 Blue */
  --chart-5: 24 100% 42%;
  /* #D55E00 Vermillion */
  --chart-6: 326 47% 64%;
  /* #CC79A7 Purple */
  --chart-other: 0 0% 60%;
  /* #999999 Gray */

  /* Sidebar - darker surface */
  --sidebar-background: 20 10% 10%;
  --sidebar-foreground: 43 38% 87%;
  --sidebar-primary: 27 99% 55%;
  --sidebar-primary-foreground: 20 10% 12%;
  --sidebar-accent: 20 7% 18%;
  --sidebar-accent-foreground: 43 38% 87%;
  --sidebar-border: 20 7% 24%;
  --sidebar-ring: 27 99% 55%;

  /* NILM-specific tokens */
  --confidence-high: 83 47% 62%;
  /* green */
  --confidence-medium: 42 96% 58%;
  /* yellow */
  --confidence-low: 1 76% 59%;
  /* red */
  --state-on: 27 99% 55%;
  /* primary amber */
  --state-off: 20 7% 35%;
  --teal-highlight: 27 99% 55%;

  /* Prediction/AI accent glow */
  --prediction-glow: 330 35% 54%;
}

.light {
  /* Light theme - inverted for readability */
  --background: 43 30% 96%;
  /* warm off-white */
  --foreground: 20 10% 15%;

  --card: 0 0% 100%;
  --card-foreground: 20 10% 15%;

  --popover: 0 0% 100%;
  --popover-foreground: 20 10% 15%;

  /* Primary stays consistent */
  --primary: 24 95% 45%;
  /* slightly darker for light bg */
  --primary-foreground: 0 0% 100%;

  --secondary: 43 20% 92%;
  --secondary-foreground: 20 10% 15%;

  --muted: 43 20% 92%;
  --muted-foreground: 20 8% 45%;

  --accent: 330 35% 50%;
  --accent-foreground: 0 0% 100%;

  --destructive: 1 72% 51%;
  --destructive-foreground: 0 0% 100%;

  --border: 43 15% 85%;
  --input: 43 15% 85%;
  --ring: 24 95% 45%;

  /* Energy semantics - light mode */
  --energy-success: 160 84% 39%;
  --energy-success-foreground: 0 0% 100%;
  --energy-warning: 45 93% 47%;
  --energy-warning-foreground: 26 90% 25%;
  --energy-warning-bg: 48 96% 92%;
  --energy-error: 0 72% 51%;
  --energy-error-foreground: 0 0% 100%;
  --energy-error-bg: 0 93% 94%;
  --energy-info: 340 45% 55%;
  --energy-info-foreground: 0 0% 100%;

  /* Chart colors - adjust for light backgrounds */
  --chart-1: 40 100% 40%;
  --chart-2: 199 90% 45%;
  --chart-3: 160 100% 28%;
  --chart-4: 201 100% 32%;
  --chart-5: 24 100% 38%;
  --chart-6: 326 47% 55%;
  --chart-other: 0 0% 50%;

  /* Sidebar - keep dark for contrast */
  --sidebar-background: 20 10% 15%;
  --sidebar-foreground: 43 38% 92%;
  --sidebar-primary: 27 99% 55%;
  --sidebar-primary-foreground: 20 10% 12%;
  --sidebar-accent: 20 10% 22%;
  --sidebar-accent-foreground: 43 38% 92%;
  --sidebar-border: 20 7% 25%;
  --sidebar-ring: 27 99% 55%;

  /* NILM tokens - light mode */
  --confidence-high: 160 84% 39%;
  --confidence-medium: 45 93% 47%;
  --confidence-low: 0 72% 51%;
  --state-on: 24 95% 45%;
  --state-off: 43 15% 80%;
  --teal-highlight: 24 95% 45%;
  --prediction-glow: 330 35% 50%;
}


/* High Contrast Mode */
.high-contrast {
  /* Increase text contrast */
  --foreground: 0 0% 100%;
  --muted-foreground: 0 0% 85%;

  /* Stronger borders */
  --border: 0 0% 50%;
  --input: 0 0% 50%;

  /* More visible primary */
  --primary: 27 100% 60%;

  /* Higher contrast backgrounds */
  --card: 0 0% 8%;
  --popover: 0 0% 5%;

  /* Energy semantics - higher contrast */
  --energy-success: 120 80% 50%;
  --energy-warning: 45 100% 55%;
  --energy-error: 0 90% 55%;

  /* Confidence colors - brighter */
  --confidence-high: 120 80% 50%;
  --confidence-medium: 45 100% 55%;
  --confidence-low: 0 90% 55%;
}

.high-contrast.light {
  --foreground: 0 0% 0%;
  --muted-foreground: 0 0% 25%;
  --border: 0 0% 30%;
  --input: 0 0% 30%;
  --card: 0 0% 100%;
  --popover: 0 0% 100%;
  --primary: 24 100% 35%;
}

/* High contrast specific overrides */
.high-contrast .nilm-panel {
  @apply border border-border;
}

.high-contrast button,
.high-contrast input,
.high-contrast select {
  @apply border-2;
}

.high-contrast :focus-visible {
  @apply ring-4;
}

/* Compact mode */
.compact-mode .nilm-panel-header {
  @apply px-3 py-2;
}

.compact-mode .nilm-panel-body {
  @apply px-3 pb-3;
}

.compact-mode .nilm-panel-footer {
  @apply px-3 py-2;
}

/* Reduce motion */
.reduce-motion * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family:
      "Inter",
      system-ui,
      -apple-system,
      sans-serif;
  }

  /* Numeric/metric font styling - tabular nums for alignment */
  .metric-value {
    @apply font-semibold tabular-nums tracking-tight;
    font-feature-settings: "tnum" 1;
  }

  /* Mono for timestamps/IDs */
  .mono {
    font-family: "JetBrains Mono", ui-monospace, monospace;
    @apply text-sm;
  }

  /* Focus rings for accessibility */
  :focus-visible {
    @apply outline-2 outline-ring outline-offset-2;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer components {

  /* NILM Panel Card - reduced border noise */
  .nilm-panel {
    @apply bg-card rounded-lg shadow-md;
  }

  .nilm-panel-header {
    @apply flex items-center justify-between px-5 py-4;
  }

  .nilm-panel-body {
    @apply px-5 pb-5;
  }

  .nilm-panel-footer {
    @apply px-5 py-3 bg-muted/30 text-xs text-muted-foreground rounded-b-lg;
  }

  /* Primary highlight for selected ranges */
  .teal-highlight {
    @apply bg-primary/10 border-primary/30;
  }

  /* Waveform decoration - updated to primary color */
  .waveform-bg {
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='20' viewBox='0 0 60 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 Q5 2, 10 10 T20 10 T30 10 T40 10 T50 10 T60 10' fill='none' stroke='%23fe8019' stroke-width='1' opacity='0.15'/%3E%3C/svg%3E");
    background-repeat: repeat-x;
    background-position: center;
  }

  /* AI/Prediction indicator */
  .prediction-indicator {
    @apply relative;
  }

  .prediction-indicator::after {
    content: "";
    @apply absolute -inset-0.5 rounded-lg opacity-0 transition-opacity;
    background: linear-gradient(135deg,
        hsl(var(--prediction-glow) / 0.2),
        transparent);
  }

  .prediction-indicator:hover::after {
    @apply opacity-100;
  }

  /* Fade in animation */
  .animate-fade-in {
    animation: fadeIn 0.2s ease-out;
  }

  /* Pulse for live indicators */
  .pulse-live {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Dark-native form inputs */
  input,
  select,
  textarea {
    @apply bg-popover text-foreground placeholder:text-muted-foreground;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}